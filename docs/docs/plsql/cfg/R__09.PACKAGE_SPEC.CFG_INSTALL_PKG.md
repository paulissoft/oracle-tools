<!-- DO NOT EDIT THIS FILE DIRECTLY - it is generated from source file db/app/cfg/src/full/R__09.PACKAGE_SPEC.CFG_INSTALL_PKG.sql -->
<!-- markdownlint-disable MD003 MD012 MD024 MD033 -->

- [Package "CFG_INSTALL_PKG"](#package-cfg_install_pkg)
- [Procedure "beforeMigrate"](#procedure-beforemigrate)
- [Procedure "beforeEachMigrate"](#procedure-beforeeachmigrate)
- [Procedure "afterMigrate"](#procedure-aftermigrate)
- [Procedure setup_session](#procedure-setup_session)
- [Procedure compile_objects](#procedure-compile_objects)
- [Function show_compiler_messages](#function-show_compiler_messages)
- [Function format_compiler_messages](#function-format_compiler_messages)
- [Function purge_flyway_table](#function-purge_flyway_table)


# Package "CFG_INSTALL_PKG"

This package defines functions and procedures used by Flyway callbacks.

SIGNATURE

```sql
PACKAGE "CFG_INSTALL_PKG" AUTHID CURRENT_USER
is
```


## Procedure "beforeMigrate"

The Flyway beforeMigrate callback.

SIGNATURE

```sql
procedure "beforeMigrate"
( p_oracle_tools_schema_msg in varchar2 default $$PLSQL_UNIT_OWNER -- Oracle tools schema for msg framework
);
```


## Procedure "beforeEachMigrate"

The Flyway beforeEachMigrate callback.

SIGNATURE

```sql
procedure "beforeEachMigrate";
```


## Procedure "afterMigrate"

The Flyway afterMigrate callback.

SIGNATURE

```sql
procedure "afterMigrate"
( p_compile_all in boolean -- Do we need to compile all?
, p_reuse_settings in boolean -- Do we reuse PL/SQL settings?
, p_oracle_tools_schema_msg in varchar2 default $$PLSQL_UNIT_OWNER -- Oracle tools schema for msg framework
);
```


## Procedure setup_session

Setup a session.

Used by Flyway to define PL/SQL flags (PLSQL_CCFlags), PL/SQL warnings (PLSQL_WARNINGS) and PL/Scope settings (PLSCOPE_SETTINGS).

PLSQL_CCFlags:
- $$Debug (is package DBUG available?)
- $$Testing (is utPLSQL package UT available?)

SIGNATURE

```sql
procedure setup_session
( p_plsql_warnings in varchar2 default 'DISABLE:ALL' -- For "alter session set PLSQL_WARNINGS = '<p_plsql_warnings>'"
, p_plscope_settings in varchar2 default null -- For "alter session set PLSCOPE_SETTINGS = '<p_plscope_settings>'"
);
```


## Procedure compile_objects

Compile objects in the current schema.

SIGNATURE

```sql
procedure compile_objects
( p_compile_all in boolean -- Do we need to compile all?
, p_reuse_settings in boolean -- Do we reuse PL/SQL settings?
);
```


## Function show_compiler_messages

Show compiler messages.

SIGNATURE

```sql
function show_compiler_messages
( p_object_schema in varchar2 default user -- The schema owner of the objects to show.
, p_object_type in varchar2 default null -- The object type (may be a DBMS_METADATA object type).
, p_object_names in varchar2 default null -- A comma separated list of object names.
, p_object_names_include in integer default null -- How to treat the object name list: include (1), exclude (0) or don't care (null)?
, p_exclude_objects in clob default null -- A list of unique identification expressions to exclude where you can use O/S wild cards (* and ?).
, p_include_objects in clob default null -- A list of unique identification expressions to include where you can use O/S wild cards (* and ?).
, p_recompile in integer default 0 -- Do we need to recompile the objects before showing the messages? 0 means no.
, p_plsql_warnings in varchar2 default 'ENABLE:ALL' -- For "alter session set PLSQL_WARNINGS = '<p_plsql_warnings>'".
, p_plscope_settings in varchar2 default 'IDENTIFIERS:ALL' -- For "alter session set PLSCOPE_SETTINGS = '<p_plscope_settings>'".
)
return t_compiler_message_tab -- A list of USER_ERRORS rows ordered by name, type, sequence.
pipelined;
```


## Function format_compiler_messages

Format compiler messages.

SIGNATURE

```sql
function format_compiler_messages
( p_object_schema in varchar2 default user -- The schema owner of the objects to show.
, p_object_type in varchar2 default null -- The object type (may be a DBMS_METADATA object type).
, p_object_names in varchar2 default null -- A comma separated list of object names.
, p_object_names_include in integer default null -- How to treat the object name list: include (1), exclude (0) or don't care (null)?
, p_exclude_objects in clob default null -- A list of unique identification expressions to exclude where you can use O/S wild cards (* and ?).
, p_include_objects in clob default null -- A list of unique identification expressions to include where you can use O/S wild cards (* and ?).
, p_recompile in integer default 0 -- Do we need to recompile the objects before showing the messages? 0 means no.
, p_plsql_warnings in varchar2 default 'ENABLE:ALL' -- For "alter session set PLSQL_WARNINGS = '<p_plsql_warnings>'".
, p_plscope_settings in varchar2 default 'IDENTIFIERS:ALL' -- For "alter session set PLSCOPE_SETTINGS = '<p_plscope_settings>'".
)
return t_message_tab -- A list of USER_ERRORS rows ordered by name, type, sequence.
pipelined;
```


## Function purge_flyway_table

Purge the Flyway table:
1. keep all entries with a "version" not null (non-repeatables)
2. always keep the latest entry per repeatable script ("version" null) and keep at most p_nr_months_to_keep for older entries

SIGNATURE

```sql
function purge_flyway_table
( p_table_name in varchar2
, p_nr_months_to_keep in positiven default 12
)
return integer;
```


