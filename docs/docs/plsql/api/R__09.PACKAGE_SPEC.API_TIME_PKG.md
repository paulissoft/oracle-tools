<!-- DO NOT EDIT THIS FILE DIRECTLY - it is generated from source file db/app/api/src/full/R__09.PACKAGE_SPEC.API_TIME_PKG.sql -->
<!-- markdownlint-disable MD003 MD012 MD024 MD033 -->

- [Package "API_TIME_PKG"](#package-api_time_pkg)
- [Function get_time](#function-get_time)
- [Function get_timestamp](#function-get_timestamp)
- [Function get_milliseconds](#function-get_milliseconds)
- [Function elapsed_time](#function-elapsed_time)
- [Function delta](#function-delta)
- [Function elapsed_time_ms](#function-elapsed_time_ms)
- [Function delta_ms](#function-delta_ms)
- [Function elapsed_time](#function-elapsed_time-1)
- [Function delta](#function-delta-1)
- [Function get_timestamp_str](#function-get_timestamp_str)


# Package "API_TIME_PKG"

Package to give a rough estimate of the elapsed time in seconds and fractional seconds.
The granularity is what is returned by dbms_utility.get_time, i.e hundredths of seconds.

Notes:
1. the SYS_EXTRACT_UTC() returns a value with datatype TIMESTAMP, not TIMESTAMP WITH TIME ZONE. So do NOT use that.
2. SYSTIMESTAMP() and CURRENT_TIMESTAMP() have datatype TIMESTAMP WITH TIME ZONE.

SIGNATURE

```sql
PACKAGE "API_TIME_PKG" AUTHID DEFINER
is

subtype time_t is number; -- return value of dbms_utility.get_time()
subtype timestamp_t is timestamp(6) with time zone; -- return value of systimestamp()
subtype timestamp_diff_t is interval day(9) to second(6);
subtype seconds_t is number; -- before the decimal the number of seconds, after the decimal the fractional seconds
subtype timestamp_str_t is varchar2(33 char);
subtype milliseconds_t is integer; -- milliseconds since the epoch, i.e. 1-JAN-1970 (UTC)

c_timestamp_format constant varchar2(37 char) := 'YYYY-MM-DD"T"HH24:MI:SS.FF6"Z"TZH:TZM';
```


## Function get_time

Get the time in seconds with fractions (not hundredths of seconds!). Just returns dbms_utility.get_time.

SIGNATURE

```sql
function get_time
return time_t;
```


## Function get_timestamp

Get the current timestamp. Just returns systimestamp().

SIGNATURE

```sql
function get_timestamp
return timestamp_t;
```


## Function get_milliseconds

Get the current timestamp in milliseconds since the epoch.

SIGNATURE

```sql
function get_milliseconds
return milliseconds_t;
```


## Function elapsed_time

Determines the elapsed time in seconds (not hundredths of seconds!) between two measure points taken by get_time(), the start (earlier) and the end (later).

The function dbms_utility.get_time returns the number of hundredths of a second from the point in time at which the subprogram is invoked.

Numbers are returned in the range -2147483648 to 2147483647 depending on
platform and machine, and your application must take the sign of the number
into account in determining the interval. For instance, in the case of two
negative numbers, application logic must allow that the first (earlier) number
will be larger than the second (later) number which is closer to zero. By the
same token, your application should also allow that the first (earlier) number
be negative and the second (later) number be positive.

SIGNATURE

```sql
function elapsed_time
( p_start in time_t -- start value returned by get_time
, p_end in time_t -- end value returned by get_time
)
return seconds_t; -- in seconds with fractions (not hundredths of seconds!)
```


## Function delta

Just another name for elapsed_time above.

SIGNATURE

```sql
function delta
( p_start in time_t -- start value returned by get_time
, p_end in time_t -- end value returned by get_time
)
return seconds_t; -- in seconds with fractions (not hundredths of seconds!)
```


## Function elapsed_time_ms

Elapsed time in milliseconds since the epoch.

SIGNATURE

```sql
function elapsed_time_ms
( p_start in milliseconds_t -- start value returned by get_milliseconds
, p_end in milliseconds_t -- end value returned by get_milliseconds
)
return milliseconds_t; -- in milliseconds since the epoch
```


## Function delta_ms

Just another name for elapsed_time_ms above.

SIGNATURE

```sql
function delta_ms
( p_start in milliseconds_t -- start value returned by get_milliseconds
, p_end in milliseconds_t -- end value returned by get_milliseconds
)
return milliseconds_t; -- in milliseconds since the epoch
```


## Function elapsed_time

Determines the elapsed time in seconds (and fractional seconds) between two measure points taken by get_timestamp(), the start (earlier) and the end (later).
The DAY, HOUR, MINUTE and SECOND will be EXTRACTed from the difference interval.

SIGNATURE

```sql
function elapsed_time
( p_start in timestamp_t -- start value returned by get_timestamp
, p_end in timestamp_t -- end value returned by get_timestamp
)
return seconds_t; -- in seconds with fractions (not hundredths of seconds!)
```


## Function delta

Just another name for elapsed_time above.

SIGNATURE

```sql
function delta
( p_start in timestamp_t -- start value returned by get_timestamp
, p_end in timestamp_t -- end value returned by get_timestamp
)
return seconds_t; -- in seconds with fractions (not hundredths of seconds!)
```


## Function get_timestamp_str

Get the current timestamp as a string. Just returns systimestamp() (in 'YYYY-MM-DD"T"HH24:MI:SS.FF6"Z"' format).

SIGNATURE

```sql
function get_timestamp_str
return timestamp_str_t;
```


